# 🏠︎ e-commerce

---

> 이 프로젝트는 Kotlin, JPA, QueryDSL, Spring Boot, Spring Security, Redis, MySQL을 이용하여 개발된 전자상거래 서비스입니다.


<br>

## 사용 기술

---


언어: `Kotlin`

백엔드 프레임워크: `Spring Boot`, `Spring Security`, `Spring Data JPA`

데이터베이스: `MySQL`, `H2`

캐시/분산 처리: `Redis`, `Redisson`

쿼리 빌더: `QueryDSL`

데이터 처리: `Apache POI`

컨테이너화: `Docker`

<br>

## 프로젝트 구조

---

### core-api

- API 엔드포인트 및 예외 처리 기능을 제공합니다.

### core-batch

- 배치 작업 스케줄링 및 정기 처리 기능을 담당합니다.

### core-redis

- 캐싱 처리 및 분산 락 관리 기능을 관리합니다.

### storage

- 비즈니스 로직을 처리하는 도메인 모듈입니다.

### support

- 로깅 및 공통 유틸리티 기능을 제공합니다.

<br>

## 요구사항

---

### 인증

- 로그인 (JWT 토큰 생성)
    - [x] 사용자는 이메일과 패스워드로 로그인 할 수 있다.
    - [x] 이메일이나 패스워드가 일치하지 않으면 로그인에 실패한다.

<br>

### 사용자

- 회원가입
    - [x] 사용자는 회원가입을 할 수 있다.
    - [x] 중복된 이메일로는 회원가입을 할 수 없다.

- 사용자 상세 조회
    - [x] 사용자는 자신의 정보를 상세조회 할 수 있다.
    - [x] 존재하지 않는 사용자는 자신의 정보를 상세조회 할 수 없다.

<br>

### 카테고리

- 카테고리 목록 조회
    - [x] 카테고리 목록을 조회할 수 있다.

- 하위 카테고리 조회
    - [x] 카테고리의 하위 카테고리들을 조회할 수 있다.

<br>

### 브랜드

- 브랜드 목록 조회 및 검색
    - [x] 브랜드 목록을 조회할 수 있다.
    - [x] 한글 브랜드명으로 검색할 수 있다.
    - [x] 영문 브랜드명으로 검색할 수 있다.

- 브랜드 상세 조회
    - [x] 브랜드 정보를 상세조회 할 수 있다.
    - [x] 존재하지 않는 브랜드 정보를 상세조회 할 수 없다.

<br>

### 상품

- 상품 목록 조회 및 검색
    - [x] 상품 목록을 조회할 수 있다.
    - [x] 카테고리로 상품을 검색할 수 있다.
    - [x] 브랜드로 상품을 검색할 수 있다.
    - [x] 이름으로 상품을 검색할 수 있다.

- 상품 상세 조회
    - [x] 상품을 상세조회 할 수 있다.
    - [x] 상품을 상세조회 하면, 조회 수를 증가시키고 Redis를 이용해서 1시간마다 조회 수를 업데이트 할 수 있다.
    - [x] 존재하지 않는 상품 정보를 상세조회 할 수 없다.

<br>

### 주문

- 주문 목록 조회 및 검색
    - [x] 주문 목록을 조회할 수 있다.
    - [x] 사용자로 주문 내역을 검색할 수 있다.
    - [x] 주문 상태로 주문 내역을 검색할 수 있다.
    - [x] 주문 기간으로 주문 내역을 검색할 수 있다.

- 주문 생성
    - [x] 사용자는 주문을 할 수 있다.
    - [x] 상품의 재고가 부족하면 주문을 할 수 없다.

- 주문 상세 조회
    - [x] 주문을 상세 조회 할 수 있다.
    - [x] 존재하지 않는 주문을 상세 조회 할 수 없다.

- 주문 구매 확정
    - [x] 주문을 구매 확정 할 수 있다.
    - [x] 취소된 주문을 구매 확정 할 수 없다.
    - [x] 중복으로 구매 확정 할 수 없다.
    - [x] 주문 중, 배송 완료가 아니면 구매 확정 할 수 없다.

- 주문 취소
    - [x] 주문을 취소 할 수 있다.
    - [x] 중복으로 주문 취소 할 수 없다.
    - [x] 주문 생성, 배송 준비 단계가 아니면 주문 취소 할 수 없다.
    - [x] 주문 아이템이 모두 주문 취소된 경우, 취소 상태로 변경된다.
    - [x] 주문 아이템이 일부 주문 취소된 경우, 부분 취소 상태로 변경된다.

- 주문 내역 액셀 다운로드
    - [x] 사용자는 자신의 주문 내역을 액셀로 다운로드 받을 수 있다.
    - [x] 액셀에는 "주문 아이디", "주문 코드", "상태", "회원명", "총 상품 가격", "할인 금액", "배송비", "총 결제 금액"이 포함된다.

<br>

### 쿠폰

- 쿠폰 발급
    - [x] 사용자는 선착순 쿠폰을 발급 받을 수 있다.
    - [x] 선착순 쿠폰의 최대 발급 수를 초과하면 쿠폰을 발급받을 수 없다.

- 쿠폰 상세 조회
    - [x] 사용자는 발급 받은 쿠폰을 상세조회 할 수 있다.
    - [x] 존재하지 않는 쿠폰을 상세조회 할 수 없다.

- 쿠폰 목록 조회
    - [x] 사용자는 발급 받은 쿠폰 목록을 조회 할 수 있다.
    - [x] 사용자는 사용한 쿠폰 목록을 조회 할 수 있다.
    - [x] 사용자는 사용하지 않는 쿠폰 목록을 조회 할 수 있다.

<br>

### 좋아요

- 좋아요 및 좋아요 해제
    - [x] 사용자는 상품을 좋아요에 추가 할 수 있다.
    - [x] 사용자는 상품의 좋아요를 해제 할 수 있다.
    - [x] 존재하지 않는 상품을 좋아요에 추가 할 수 없다.

- 좋아요 상품 목록 조회
    - [x] 사용자는 좋아요한 상품 목록을 조회 할 수 있다.

<br>

### 상품 후기

- 상품 후기 목록 조회 및 검색
    - [x] 사용자는 상품 후기 목록을 조회 할 수 있다.
    - [x] 자신이 작성한 상품 후기 목록을 조회 할 수 있다.
    - [x] 상품에 등록된 상품 후기 목록을 조회 할 수 있다.
    - [x] 포토 리뷰 상품 후기 목록을 조회 할 수 있다.
    - [x] 일반 리뷰 상품 후기 목록을 조회 할 수 있다.

- 상품 후기 등록
    - [x] 주문 상품의 후기를 등록할 수 있다.
    - [x] 존재하지 않는 주문 상품에 후기를 등록할 수 없다.
    - [x] 존재하지 않는 상품에 후기를 등록할 수 없다.

- 상품 후기 상세 조회
    - [x] 상품 후기를 상세 조회 할 수 있다.
    - [x] 존재하지 않는 상품 후기를 상세 조회 할 수 없다.

- 상품 후기 평점 조회
    - [x] 상품에 등록된 후기들의 평점을 1~5점 내로 조회 할 수 있다.

<br>

## 도메인 명세

---

### 사용자 (UserEntity)

| 필드          | 설명           |
|-------------|--------------|
| id          | 고유 식별자       |
| email       | 이메일          |
| password    | 비밀번호         |
| name        | 회원명          |
| phoneNumber | 휴대전화번호       |
| roles       | 역할 (고객, 관리자) |
| createdAt   | 등록일          |
| updatedAt   | 수정일          |

<br>

### 카테고리 (CategoryEntity)

| 필드           | 설명         |
|--------------|------------|
| id           | 고유 식별자     |
| parent       | 부모 카테고리    |
| name         | 카테고리명      |
| iconImageUrl | 아이콘 이미지 주소 |
| hide         | 숨김 여부      |
| children     | 하위 카테고리    |
| createdAt    | 등록일        |
| updatedAt    | 수정일        |

<br>

### 브랜드 (BrandEntity)

| 필드             | 설명        |
|----------------|-----------|
| id             | 고유 식별자    |
| nameKo         | 브랜드 한글명   |
| nameEn         | 브랜드 영문명   |
| bannerImageUrl | 배너 이미지 주소 |

<br>

### 상품 (ProductEntity)

| 필드            | 설명                   |
|---------------|----------------------|
| id            | 고유 식별자               |
| brandId       | 브랜드 아이디              |
| status        | 상태 (판매 중, 판매 중지, 품절) |
| name          | 상품명                  |
| thumbnailUrl  | 상품 썸네일 이미지 주소        |
| price         | 상품 가격                |
| discountPrice | 상품 할인 가격             |
| stockQuantity | 재고                   |
| viewCount     | 조회 수                 |
| createdAt     | 등록일                  |
| updatedAt     | 수정일                  |

<br>

### 상품 뱃지 (ProductBadgeEntity)

| 필드        | 설명       |
|-----------|----------|
| id        | 고유 식별자   |
| productId | 상품 아이디   |
| title     | 뱃지명      |
| color     | 뱃지명 색상   |
| bdColer   | 뱃지 배경 색상 |
| createdAt | 등록일      |
| updatedAt | 수정일      |

<br>

### 상품 배너 (ProductBannerEntity)

| 필드        | 설명        |
|-----------|-----------|
| id        | 고유 식별자    |
| productId | 상품 아이디    |
| imageUrl  | 배너 이미지 주소 |
| createdAt | 등록일       |
| updatedAt | 수정일       |

<br>

### 상품 내용 (ProductContentEntity)

| 필드        | 설명        |
|-----------|-----------|
| id        | 고유 식별자    |
| productId | 상품 아이디    |
| imageUrl  | 내용 이미지 주소 |
| createdAt | 등록일       |
| updatedAt | 수정일       |

<br>

### 주문 (OrderEntity)

| 필드                 | 설명                                 |
|--------------------|------------------------------------|
| id                 | 고유 식별자                             |
| orderCode          | 주문 번호                              |
| status             | 상태 (결제 전, 결제 완료, 결제 실패, 부분 취소, 취소) |
| userId             | 회원 아이디                             |
| orderer            | 주문자 정보                             |
| deliveryDetail     | 배송 정보                              |
| totalProductPrice  | 총 상품 가격                            |
| totalDiscountPrice | 총 할인 가격                            |
| shippingFee        | 배송비                                |
| totalPrice         | 총 결제 금액                            |
| createdAt          | 등록일                                |
| updatedAt          | 수정일                                |

<br>

### 주문자 정보 (Orderer)

| 필드          | 설명     |
|-------------|--------|
| name        | 주문자명   |
| phoneNumber | 휴대전화번호 |

<br>

### 배송 정보 (DeliveryDetail)

| 필드            | 설명           |
|---------------|--------------|
| address       | 주소           |
| addressDetail | 상세 주소 (동/호수) |
| recipientName | 수신자명         |
| message       | 배송 메세지       |

<br>

### 주문 아이템 (OrderItemEntity)

| 필드            | 설명                                     |
|---------------|----------------------------------------|
| id            | 고유 식별자                                 |
| status        | 상태 (생성, 배송 준비, 배송 중, 배송 완료, 구매 확정, 취소) |
| orderId       | 주문 아이디                                 |
| productId     | 상품 아이디                                 |
| productName   | 상품명                                    |
| quantity      | 상품 갯수                                  |
| discountPrice | 상품 할인 금액                               |
| price         | 상품 가격                                  |
| totalPrice    | 총 상품 금액                                |
| createdAt     | 등록일                                    |
| updatedAt     | 수정일                                    |

<br>

### 쿠폰 (CouponEntity)

| 필드                   | 설명                        |
|----------------------|---------------------------|
| id                   | 고유 식별자                    |
| couponType           | 타입 (모든 할인, 상품 할인, 배송비 할인) |
| code                 | 쿠폰 코드                     |
| name                 | 쿠폰명                       |
| expiredDate          | 만료일                       |
| fromDate             | 시작일                       |
| toDate               | 종료일                       |
| minimumOrderPrice    | 최소 주문 금액                  |
| maximumDiscountPrice | 최대 할인 금액                  |
| firstComeFirstServed | 선착순 발급 여부                 |
| maxIssuanceCount     | 최대 발급 수                   |
| currentIssuedCount   | 현재 발급 수                   |
| createdAt            | 등록일                       |
| updatedAt            | 수정일                       |

<br>

### 금액 할인 금액 (WonCouponEntity)

| 필드            | 설명    |
|---------------|-------|
| discountPrice | 할인 금액 |`

<br>

### 퍼센트 할인 금액 (PercentCouponEntity)

| 필드              | 설명  |
|-----------------|-----|
| discountPercent | 할인율 |`

<br>

### 좋아요 (LikeEntity)

| 필드        | 설명      |
|-----------|---------|
| id        | 고유 식별자  |
| userId    | 사용자 아이디 |
| productId | 상품 아이디  |
| createdAt | 등록일     |
| updatedAt | 수정일     |

<br>

### 상품 후기 (ReviewEntity)

| 필드          | 설명                |
|-------------|-------------------|
| id          | 고유 식별자            |
| type        | 타입 (포토 리뷰, 일반 리뷰) |
| userId      | 사용자 아이디           |
| orderItemId | 주문 아이템 아이디        |
| productId   | 상품 아이디            |
| content     | 후기 내용             |
| score       | 점수                |
| createdAt   | 등록일               |
| updatedAt   | 수정일               |

<br>

### 상품 후기 포토 (ReviewPhotoEntity)

| 필드       | 설명        |
|----------|-----------|
| id       | 고유 식별자    |
| reviewId | 상품 후기 아이디 |
| photoUrl | 포토 주소     |

<br>